webpackJsonp([3],{516:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(588),n=a.n(s);for(var r in s)"default"!==r&&function(t){a.d(e,t,function(){return s[t]})}(r);var i=a(649),o=a(195),l=o(n.a,i.a,!1,null,null,null);e.default=l.exports},520:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(89),n=function(t){return t&&t.__esModule?t:{default:t}}(s),r=a(196);e.default={props:["signinUp","headerTitle","goBack","hasLogo","paddingLeft"],methods:(0,n.default)({},(0,r.mapActions)("global/user",["getUserInfo"])),computed:(0,n.default)({},(0,r.mapState)("global/user",["userInfo"])),mounted:function(){this.getUserInfo()}}},521:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(520),n=a.n(s);for(var r in s)"default"!==r&&function(t){a.d(e,t,function(){return s[t]})}(r);var i=a(522),o=a(195),l=o(n.a,i.a,!1,null,null,null);e.default=l.exports},522:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-navbar",{staticClass:"fixed-top"},[t._t("logo"),t._v(" "),a("b-navbar-nav",{staticClass:"flex-row align-items-center flex-nowrap",class:t.hasLogo?"":"w-100"},[t._t("search"),t._v(" "),t.goBack?a("b-nav-item",{on:{click:function(e){t.$router.go(-1)}}},[a("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.headerTitle?a("b-nav-text",{staticClass:"text-center text-uppercase",class:{"pl-0":t.paddingLeft}},[t._v("\n            "+t._s(t.headerTitle)+"\n        ")]):t._e(),t._v(" "),t._t("msiteTitle"),t._v(" "),t.signinUp?a("b-nav-item",{attrs:{to:t.userInfo?"/profile":"/login"}},[t.userInfo?a("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}):a("span",{staticClass:"signin-text text-uppercase"},[t._v("SIGNIN/SIGNUP")])]):t._e(),t._v(" "),t._t("edit"),t._v(" "),t._t("changeCity"),t._v(" "),t._t("changeLogin")],2)],2)},n=[],r={render:s,staticRenderFns:n};e.a=r},523:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["alertText","showAlert"],methods:{closeTip:function(){this.$emit("closeTip")}}}},524:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(523),n=a.n(s);for(var r in s)"default"!==r&&function(t){a.d(e,t,function(){return s[t]})}(r);var i=a(525),o=a(195),l=o(n.a,i.a,!1,null,null,null);e.default=l.exports},525:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"alertTipModal",staticClass:"alert-tip-container",attrs:{centered:"","hide-header":"","hide-footer":"",visible:t.showAlert,"body-class":"d-flex flex-column align-items-center"},on:{hidden:t.closeTip}},[a("i",{staticClass:"fa fa-exclamation-circle",attrs:{"aria-hidden":"true"}}),t._v(" "),a("p",{staticClass:"text-center"},[t._v(t._s(t.alertText))]),t._v(" "),a("b-button",{staticClass:"btn btn-outline-success w-100 frame-btn",on:{click:t.closeTip}},[t._v("CONFIRM")])],1)},n=[],r={render:s,staticRenderFns:n};e.a=r},526:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{positionY:0,timer:null}},mounted:function(){var t=this;this.timer=setInterval(function(){t.positionY++},600)},beforeDestroy:function(){clearInterval(this.timer)}}},527:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(526),n=a.n(s);for(var r in s)"default"!==r&&function(t){a.d(e,t,function(){return s[t]})}(r);var i=a(528),o=a(195),l=o(n.a,i.a,!1,null,null,null);e.default=l.exports},528:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading-container"},[a("div",{staticClass:"loading-image",style:{backgroundPositionY:-t.positionY%7*2.5+"rem"}}),t._v(" "),a("svg",{staticClass:"loading-ellipse",attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[a("ellipse",{staticStyle:{fill:"#ddd",stroke:"none"},attrs:{cx:"26",cy:"10",rx:"26",ry:"10"}})])])},n=[],r={render:s,staticRenderFns:n};e.a=r},530:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(89),n=function(t){return t&&t.__esModule?t:{default:t}}(s),r=a(196);e.default={computed:(0,n.default)({},(0,r.mapState)("global/order",["geohash"])),methods:{goToURL:function(t){this.$router.push(t)}}}},534:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(530),n=a.n(s);for(var r in s)"default"!==r&&function(t){a.d(e,t,function(){return s[t]})}(r);var i=a(535),o=a(195),l=o(n.a,i.a,!1,null,null,null);e.default=l.exports},535:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"bv-example-row fixed-bottom footer-menu",attrs:{fluid:""}},[a("b-row",{staticClass:"align-items-center justify-content-around"},[a("b-col",{staticClass:"menu-item d-flex flex-column align-items-center justify-content-center",attrs:{cols:"3"},on:{click:function(e){t.goToURL({path:"/msite",query:{geohash:t.geohash}})}}},[a("i",{staticClass:"fa fa-car",attrs:{"aria-hidden":"true"}}),t._v(" "),a("p",{staticClass:"text-uppercase"},[t._v("DELIVERY")])]),t._v(" "),a("b-col",{staticClass:"menu-item d-flex flex-column align-items-center justify-content-center",attrs:{cols:"3"},on:{click:function(e){t.goToURL({path:"/search/"+t.geohash})}}},[a("i",{staticClass:"fa fa-compass",attrs:{"aria-hidden":"true"}}),t._v(" "),a("p",{staticClass:"text-uppercase"},[t._v("SEARCH")])]),t._v(" "),a("b-col",{staticClass:"menu-item d-flex flex-column align-items-center justify-content-center",attrs:{cols:"3"},on:{click:function(e){t.goToURL("/order")}}},[a("i",{staticClass:"fa fa-list-ul",attrs:{"aria-hidden":"true"}}),t._v(" "),a("p",{staticClass:"text-uppercase"},[t._v("ORDER")])]),t._v(" "),a("b-col",{staticClass:"menu-item d-flex flex-column align-items-center justify-content-center",attrs:{cols:"3"},on:{click:function(e){t.goToURL("/profile")}}},[a("i",{staticClass:"fa fa-user-o",attrs:{"aria-hidden":"true"}}),t._v(" "),a("p",{staticClass:"text-uppercase"},[t._v("ME")])])],1)],1)},n=[],r={render:s,staticRenderFns:n};e.a=r},588:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(90),r=s(n),i=a(197),o=s(i),l=a(91),c=s(l),u=a(89),d=s(u),f=a(196),v=a(136),h=a(527),_=s(h),m=a(521),p=s(m),g=a(534),b=s(g),x=a(524),C=s(x),w=a(135),y=s(w);e.default={data:function(){return{orderList:null,showLoading:!0,timeRemainMilliseconds:900,showAlert:!1,alertText:null,imgBaseUrl:v.imgBaseUrl}},components:{headerTop:p.default,alertTip:C.default,loading:_.default,footerMenu:b.default},mounted:function(){this.initData(),this.remainingTime()},beforeDestroy:function(){clearInterval(this.timer)},computed:(0,d.default)({},(0,f.mapState)({userInfo:function(t){return t.global.user.userInfo},geohash:function(t){return t.global.order.geohash}}),{timeRemain:function(){var t=parseInt(this.timeRemainMilliseconds/60);t<10&&(t="0"+t);var e=parseInt(this.timeRemainMilliseconds%60);return e<10&&(e="0"+e),"GO PAY (remain "+t+"m "+e+"s)"}}),methods:(0,d.default)({},(0,f.mapMutations)("global/order",["saveOrder"]),{initData:function(){function t(){return e.apply(this,arguments)}var e=(0,c.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.userInfo||!this.userInfo.user_id){t.next=8;break}return t.next=3,y.default.getOrderList(this.userInfo.user_id,this.offset);case 3:e=t.sent,this.orderList=[].concat((0,o.default)(e)),this.showLoading=!1,t.next=9;break;case 8:this.showLoading=!1;case 9:case"end":return t.stop()}},t,this)}));return t}(),remainingTime:function(){var t=this;clearInterval(this.timer),this.timer=setInterval(function(){0===--t.timeRemainMilliseconds&&(clearInterval(t.timer),t.showAlert=!0,t.alertText="Payment Timeout !!!")},1e3)},showOrderDetail:function(t){this.saveOrder(t),this.$router.push("/order/orderDetail")},goToPay:function(){this.showAlert=!0,this.alertText="Not support payment right now !!!"}}),watch:{userInfo:function(t){t&&t.user_id&&!this.orderList&&this.initData()}}}},649:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"text-light px-0",attrs:{fluid:""}},[a("div",{staticClass:"order-container",attrs:{id:"app-container"}},[a("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]}),t._v(" "),a("section",{attrs:{id:"order-init-container"}},[t.showLoading?t._e():a("header-top",{attrs:{"header-title":"order list","go-back":"true"}}),t._v(" "),t.showLoading?t._e():a("b-container",{staticClass:"position-relative px-0 main-container d-flex flex-column h-100",attrs:{fluid:""}},[a("b-card",{staticClass:"order-content-card",attrs:{"body-class":"px-0 pt-0"}},[a("b-list-group",t._l(t.orderList,function(e){return a("b-list-group-item",{key:e.id},[a("b-row",{staticClass:"m-0"},[a("b-col",{attrs:{cols:"3"}},[a("img",{staticClass:"order-img",attrs:{src:t.imgBaseUrl+e.restaurant_image_url}})]),t._v(" "),a("b-col",{attrs:{cols:"9"}},[a("div",{staticClass:"d-flex flex-column order-detail-info pb-3",on:{click:function(a){t.showOrderDetail(e)}}},[a("h4",{staticClass:"d-flex flex-row align-items-center"},[a("span",[t._v(t._s(e.restaurant_name))]),t._v(" "),a("i",{staticClass:"fa fa-chevron-right ml-3",attrs:{"aria-hidden":"true"}}),t._v(" "),a("span",{staticClass:"text-right"},[t._v(t._s(e.status_bar.title))])]),t._v(" "),a("p",[t._v(t._s(e.formatted_created_at))]),t._v(" "),a("div",{staticClass:"d-flex flex-row align-items-center justify-content-between"},[a("p",[t._v(t._s(e.basket.group[0][0].name)+t._s(e.basket.group[0].length>1?" 等"+e.basket.group[0].length+"件商品":""))]),t._v(" "),a("p",[t._v("¥"+t._s(e.total_amount.toFixed(2)))])])]),t._v(" "),a("div",{staticClass:"d-flex flex-column align-items-end"},["等待支付"==e.status_bar.title?a("b-button",{staticClass:"btn btn-outline-success frame-btn order-btn",on:{click:function(e){t.goToPay()}}},[t._v(t._s(t.timeRemain))]):a("router-link",{staticClass:"btn btn-outline-success frame-btn order-btn again",attrs:{to:{path:"/shop",query:{geohash:t.geohash,id:e.restaurant_id}},tag:"button"}},[t._v("order again")])],1)])],1)],1)}))],1)],1),t._v(" "),a("footer-menu")],1),t._v(" "),a("transition",{attrs:{name:"router-slid",mode:"out-in"}},[a("router-view")],1)],1)])},n=[],r={render:s,staticRenderFns:n};e.a=r}});