webpackJsonp([1],{483:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(555),i=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,function(){return a[t]})}(r);var n=s(601),o=s(195),c=o(i.a,n.a,!1,null,null,null);e.default=c.exports},520:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(89),i=function(t){return t&&t.__esModule?t:{default:t}}(a),r=s(196);e.default={props:["signinUp","headerTitle","goBack","hasLogo","paddingLeft"],methods:(0,i.default)({},(0,r.mapActions)("global/user",["getUserInfo"])),computed:(0,i.default)({},(0,r.mapState)("global/user",["userInfo"])),mounted:function(){this.getUserInfo()}}},521:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(520),i=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,function(){return a[t]})}(r);var n=s(522),o=s(195),c=o(i.a,n.a,!1,null,null,null);e.default=c.exports},522:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-navbar",{staticClass:"fixed-top"},[t._t("logo"),t._v(" "),s("b-navbar-nav",{staticClass:"flex-row align-items-center flex-nowrap",class:t.hasLogo?"":"w-100"},[t._t("search"),t._v(" "),t.goBack?s("b-nav-item",{on:{click:function(e){t.$router.go(-1)}}},[s("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.headerTitle?s("b-nav-text",{staticClass:"text-center text-uppercase",class:{"pl-0":t.paddingLeft}},[t._v("\n            "+t._s(t.headerTitle)+"\n        ")]):t._e(),t._v(" "),t._t("msiteTitle"),t._v(" "),t.signinUp?s("b-nav-item",{attrs:{to:t.userInfo?"/profile":"/login"}},[t.userInfo?s("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}):s("span",{staticClass:"signin-text text-uppercase"},[t._v("SIGNIN/SIGNUP")])]):t._e(),t._v(" "),t._t("edit"),t._v(" "),t._t("changeCity"),t._v(" "),t._t("changeLogin")],2)],2)},i=[],r={render:a,staticRenderFns:i};e.a=r},523:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["alertText","showAlert"],methods:{closeTip:function(){this.$emit("closeTip")}}}},524:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(523),i=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,function(){return a[t]})}(r);var n=s(525),o=s(195),c=o(i.a,n.a,!1,null,null,null);e.default=c.exports},525:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-modal",{ref:"alertTipModal",staticClass:"alert-tip-container",attrs:{centered:"","hide-header":"","hide-footer":"",visible:t.showAlert,"body-class":"d-flex flex-column align-items-center"},on:{hidden:t.closeTip}},[s("i",{staticClass:"fa fa-exclamation-circle",attrs:{"aria-hidden":"true"}}),t._v(" "),s("p",{staticClass:"text-center"},[t._v(t._s(t.alertText))]),t._v(" "),s("b-button",{staticClass:"btn btn-outline-success w-100 frame-btn",on:{click:t.closeTip}},[t._v("CONFIRM")])],1)},i=[],r={render:a,staticRenderFns:i};e.a=r},526:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{positionY:0,timer:null}},mounted:function(){var t=this;this.timer=setInterval(function(){t.positionY++},600)},beforeDestroy:function(){clearInterval(this.timer)}}},527:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(526),i=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,function(){return a[t]})}(r);var n=s(528),o=s(195),c=o(i.a,n.a,!1,null,null,null);e.default=c.exports},528:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading-container"},[s("div",{staticClass:"loading-image",style:{backgroundPositionY:-t.positionY%7*2.5+"rem"}}),t._v(" "),s("svg",{staticClass:"loading-ellipse",attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[s("ellipse",{staticStyle:{fill:"#ddd",stroke:"none"},attrs:{cx:"26",cy:"10",rx:"26",ry:"10"}})])])},i=[],r={render:a,staticRenderFns:i};e.a=r},540:function(t,e,s){t.exports={default:s(541),__esModule:!0}},541:function(t,e,s){s(542),t.exports=s(11).Object.values},542:function(t,e,s){var a=s(30),i=s(543)(!1);a(a.S,"Object",{values:function(t){return i(t)}})},543:function(t,e,s){var a=s(60),i=s(52),r=s(68).f;t.exports=function(t){return function(e){for(var s,n=i(e),o=a(n),c=o.length,l=0,d=[];c>l;)r.call(n,s=o[l++])&&d.push(t?[s,n[s]]:n[s]);return d}}},555:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(90),r=a(i),n=s(91),o=a(n),c=s(540),l=a(c),d=s(89),u=a(d),f=s(521),h=a(f),p=s(524),v=a(p),_=s(527),m=a(_),g=s(135),x=a(g),b=s(196),k=s(136);e.default={data:function(){return{showLoading:!0,geohash:"",shopId:null,shopCart:null,checkoutRes:null,showPaymentOpt:!1,payOptionId:1,showAlert:!1,alertText:null,imgBaseUrl:k.imgBaseUrl}},components:{headerTop:h.default,alertTip:v.default,loading:m.default},created:function(){this.geohash=this.$route.query.geohash,this.shopId=this.$route.query.shopId,this.initialShoppingCart(),this.saveShopId(this.shopId),this.shopCart=this.shoppingList[this.shopId]},mounted:function(){this.geohash&&(this.initData(),this.saveGeohash(this.geohash))},computed:(0,u.default)({},(0,b.mapState)({shoppingList:function(t){return t.global.cart.shoppingList},userInfo:function(t){return t.global.user.userInfo},choosedAddress:function(t){return t.global.address.choosedAddress},remarkText:function(t){return t.global.order.remarkText},inputText:function(t){return t.global.order.inputText}}),{remarkList:function(){var t=new String;return this.remarkText&&(0,l.default)(this.remarkText).forEach(function(e){t+=e[1]+", "}),this.inputText?t+this.inputText:t.substr(0,t.lastIndexOf(", "))}}),methods:(0,u.default)({},(0,b.mapMutations)({initialShoppingCart:"global/cart/initShoppingCart",saveGeohash:"global/order/saveGeohash",saveShopId:"global/shop/saveShopId",chooseAddress:"global/address/chooseAddress",saveCartIdSig:"global/order/saveCartIdSig",saveOrderParam:"global/order/saveOrderParam",validationRequired:"global/order/validationRequired",orderSuccess:"global/order/orderSuccess"}),{initData:function(){function t(){return e.apply(this,arguments)}var e=(0,o.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Array,(0,l.default)(this.shopCart).forEach(function(t){(0,l.default)(t).forEach(function(t){(0,l.default)(t).forEach(function(t){e.push({attrs:[],extra:{},id:t.id,name:t.name,packing_fee:t.packing_fee,price:t.price,quantity:t.num,sku_id:t.sku_id,specs:[t.specs],stock:t.stock})})})}),t.next=4,x.default.checkout(this.geohash,[e],this.shopId);case 4:this.checkoutRes=t.sent,this.saveCartIdSig({cart_id:this.checkoutRes.cart.id,sig:this.checkoutRes.sig}),this.initAddress(),this.showLoading=!1;case 8:case"end":return t.stop()}},t,this)}));return t}(),initAddress:function(){function t(){return e.apply(this,arguments)}var e=(0,o.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.userInfo||!this.userInfo.user_id){t.next=5;break}return t.next=3,x.default.userAddressList(this.userInfo.user_id);case 3:e=t.sent,e instanceof Array&&e.length&&this.chooseAddress({address:e[0],index:0});case 5:case"end":return t.stop()}},t,this)}));return t}(),confirmOrder:function(){function t(){return e.apply(this,arguments)}var e=(0,o.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.userInfo&&this.userInfo.user_id){t.next=6;break}return this.showAlert=!0,this.alertText="Login first !!!",t.abrupt("return");case 6:if(this.choosedAddress){t.next=10;break}return this.showAlert=!0,this.alertText="Add at least one address for delivery !!!",t.abrupt("return");case 10:return this.saveOrderParam({user_id:this.userInfo.user_id,cart_id:this.checkoutRes.cart.id,address_id:this.choosedAddress.id,description:this.remarkList,entities:this.checkoutRes.cart.groups,geohash:this.geohash,sig:this.checkoutRes.sig}),t.next=13,x.default.placeOrders(this.userInfo.user_id,this.checkoutRes.cart.id,this.choosedAddress.id,this.remarkList,this.checkoutRes.cart.groups,this.geohash,this.checkoutRes.sig);case 13:e=t.sent,e.need_validation?(this.validationRequired(e),this.$router.push("/confirmOrder/userValidation")):(this.orderSuccess(e),this.$router.push("/confirmOrder/payment"));case 15:case"end":return t.stop()}},t,this)}));return t}(),selectPaymentOpt:function(t,e){t&&(this.showPaymentOpt=!this.showPaymentOpt,this.payOptionId=e)}}),watch:{userInfo:function(t){t&&t.user_id&&this.initAddress()}}}},601:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"text-light px-0",attrs:{fluid:""}},[s("div",{staticClass:"confirm-order-container",attrs:{id:"app-container"}},[s("loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]}),t._v(" "),t.showLoading?t._e():s("section",{attrs:{id:"confirm-order-init-container"}},[t.showLoading?t._e():s("header-top",{attrs:{"header-title":"confirm order","signin-up":"confirm order","go-back":"true"}}),t._v(" "),t.showLoading?t._e():s("b-container",{staticClass:"position-relative px-0 main-container d-flex flex-column h-100",attrs:{fluid:""}},[s("b-card",{staticClass:"order-user-info-card mb-3",attrs:{"body-class":"p-0"}},[s("router-link",{staticClass:"d-flex flex-row align-items-center justify-content-between",attrs:{to:{path:"/confirmOrder/chooseAddress",query:{id:t.checkoutRes.cart.id,sig:t.checkoutRes.sig}}}},[s("i",{staticClass:"fa fa-map-marker mr-1",attrs:{"aria-hidden":"true"}}),t._v(" "),t.choosedAddress?s("div",{staticClass:"user-info"},[s("p",[s("span",[t._v(t._s(1==t.choosedAddress.sex?"Mr":"Ms"))]),t._v(" "),s("span",[t._v(t._s(t.choosedAddress.name))]),t._v(" "),s("span",[t._v(t._s(t.choosedAddress.phone))])]),t._v(" "),s("p",{staticClass:"d-flex flex-row align-items-center"},[t.choosedAddress.tag?s("span",{staticClass:"mr-1",style:{backgroundColor:"company"==t.choosedAddress.tag?"#7E924A":"#9D3D2F"}},[t._v(t._s(t.choosedAddress.tag))]):t._e(),t._v(" "),s("span",[t._v(t._s(t.choosedAddress.address_detail))])])]):s("div",{staticClass:"user-info"},[t._v("Please add at least one shipping address !!!")]),t._v(" "),s("i",{staticClass:"fa fa-chevron-right ml-1 right-arrow",attrs:{"aria-hidden":"true"}})])],1),t._v(" "),s("b-card",{staticClass:"order-content-card",attrs:{"body-class":"px-0 pt-0 h-100"}},[s("div",{staticClass:"delivery-mode d-flex flex-row align-items-center justify-content-between mb-3"},[s("span",[t._v("delivery time")]),t._v(" "),s("div",{staticClass:"delivery-detail"},[s("p",[t._v("ASAP | Expect Time: "+t._s(t.checkoutRes.delivery_reach_time))]),t._v(" "),t.checkoutRes.cart.is_deliver_by_fengniao?s("span",[t._v("蜂鸟专送")]):t._e()])]),t._v(" "),s("div",{staticClass:"payment-method p-0 mb-3"},[s("div",{staticClass:"d-flex flex-row align-items-center justify-content-between",on:{click:function(e){t.showPaymentOpt=!t.showPaymentOpt}}},[s("span",{staticClass:"font-weight-bold"},[t._v("payment")]),t._v(" "),s("p",[s("span",[t._v("Pay Online")]),s("i",{staticClass:"fa fa-chevron-right ml-3",attrs:{"aria-hidden":"true"}})])]),t._v(" "),s("div",{staticClass:"d-flex flex-row align-items-center justify-content-between border-0"},[s("span",[t._v("Red Pocket")]),t._v(" "),s("span",[t._v("Only can be used in eleme APP")])])]),t._v(" "),s("div",{staticClass:"order-detail p-0 mb-3"},[s("b-list-group",[t.checkoutRes.cart.restaurant_info?s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center order-title-item"},[s("img",{staticClass:"shop-icon mr-3",attrs:{src:t.imgBaseUrl+t.checkoutRes.cart.restaurant_info.image_path}}),t._v(" "),s("span",[t._v(t._s(t.checkoutRes.cart.restaurant_info.name))])]):t._e(),t._v(" "),t._l(t.checkoutRes.cart.groups[0],function(e){return t.checkoutRes.cart.groups?s("b-list-group-item",{key:e.id,staticClass:"d-flex flex-row align-items-center food-content-item"},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("div",[s("span",{staticClass:"mr-5"},[t._v("x "+t._s(e.quantity))]),s("span",[t._v("$"+t._s(e.price))])])]):t._e()}),t._v(" "),t.checkoutRes.cart.extra?s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center fee-item"},[s("span",[t._v(t._s(t.checkoutRes.cart.extra[0].name))]),t._v(" "),s("span",[t._v("$"+t._s(t.checkoutRes.cart.extra[0].price))])]):t._e(),t._v(" "),s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center fee-item"},[s("span",[t._v("delivery fee")]),t._v(" "),s("span",[t._v("$"+t._s(t.checkoutRes.cart.deliver_amount||0))])]),t._v(" "),s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center fee-item"},[s("span",[t._v("IN TOTAL: $"+t._s(t.checkoutRes.cart.total))]),t._v(" "),s("span",[s("span",{staticClass:"font-weight-bold"},[t._v("TO PAY:")]),t._v(" $"+t._s(t.checkoutRes.cart.total)+" ")])])],2)],1),t._v(" "),s("div",{staticClass:"notes-detail p-0 mb-3"},[s("b-list-group",[s("b-list-group-item",[s("router-link",{staticClass:"d-flex flex-row align-items-center justify-content-between",attrs:{to:{path:"/confirmOrder/remark",query:{id:t.checkoutRes.cart.id,sig:t.checkoutRes.sig}}}},[s("span",{staticClass:"mr-3"},[t._v("Notes")]),t._v(" "),s("p",{staticClass:"d-flex flex-row align-items-center"},[s("span",[t._v(t._s(t.remarkText||t.inputText?t.remarkList:"flavour, spicy level etc"))]),s("i",{staticClass:"fa fa-chevron-right ml-3",attrs:{"aria-hidden":"true"}})])])],1),t._v(" "),s("b-list-group-item",[s("router-link",{staticClass:"d-flex flex-row align-items-center justify-content-between",class:{available:t.checkoutRes.invoice.is_available},attrs:{to:t.checkoutRes.invoice.is_available?"/confirmOrder/invoice":""}},[s("span",{staticClass:"mr-3"},[t._v("Invoice")]),t._v(" "),s("p",{staticClass:"d-flex flex-row align-items-center"},[s("span",[t._v(t._s(t.checkoutRes.invoice.status_text))]),s("i",{staticClass:"fa fa-chevron-right ml-3",attrs:{"aria-hidden":"true"}})])])],1)],1)],1),t._v(" "),s("div",{staticClass:"order-footer fixed-bottom w-100 m-0 d-flex flex-row align-items-center justify-content-between"},[s("p",[s("span",{staticClass:"mr-1"},[t._v("TO PAY")]),t._v(" $"+t._s(t.checkoutRes.cart.total))]),t._v(" "),s("p",{staticClass:"h-100 d-flex align-items-center",on:{click:t.confirmOrder}},[s("span",[t._v("Confirm Order")])])])])],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[t.showPaymentOpt?s("div",{staticClass:"overlay",on:{click:function(e){t.showPaymentOpt=!1}}}):t._e()]),t._v(" "),s("transition",{attrs:{name:"slid-up"}},[t.showPaymentOpt?s("div",{staticClass:"payment-way-container fixed-bottom w-100"},[s("h4",{staticClass:"text-center"},[t._v("Payment Options")]),t._v(" "),s("b-list-group",t._l(t.checkoutRes.payments,function(e){return s("b-list-group-item",{key:e.id,staticClass:"d-flex flex-row align-items-center justify-content-between",class:{chosed:t.payOptionId==e.id},on:{click:function(s){t.selectPaymentOpt(e.is_online_payment,e.id)}}},[s("p",[t._v(t._s(e.name)),e.is_online_payment?t._e():s("span",[t._v(t._s(e.description))])]),t._v(" "),s("i",{staticClass:"fa fa-check-circle",attrs:{"aria-hidden":"true"}})])}))],1):t._e()])],1),t._v(" "),s("alert-tip",{attrs:{alertText:t.alertText,showAlert:t.showAlert},on:{closeTip:function(e){t.showAlert=!1}}}),t._v(" "),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("router-view")],1)],1)])},i=[],r={render:a,staticRenderFns:i};e.a=r}});