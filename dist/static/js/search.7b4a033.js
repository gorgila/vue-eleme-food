webpackJsonp([18],{478:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(549),r=s.n(a);for(var i in a)"default"!==i&&function(t){s.d(e,t,function(){return a[t]})}(i);var n=s(594),c=s(195),o=c(r.a,n.a,!1,null,null,null);e.default=o.exports},520:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(89),r=function(t){return t&&t.__esModule?t:{default:t}}(a),i=s(196);e.default={props:["signinUp","headerTitle","goBack","hasLogo","paddingLeft"],methods:(0,r.default)({},(0,i.mapActions)("global/user",["getUserInfo"])),computed:(0,r.default)({},(0,i.mapState)("global/user",["userInfo"])),mounted:function(){this.getUserInfo()}}},521:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(520),r=s.n(a);for(var i in a)"default"!==i&&function(t){s.d(e,t,function(){return a[t]})}(i);var n=s(522),c=s(195),o=c(r.a,n.a,!1,null,null,null);e.default=o.exports},522:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-navbar",{staticClass:"fixed-top"},[t._t("logo"),t._v(" "),s("b-navbar-nav",{staticClass:"flex-row align-items-center flex-nowrap",class:t.hasLogo?"":"w-100"},[t._t("search"),t._v(" "),t.goBack?s("b-nav-item",{on:{click:function(e){t.$router.go(-1)}}},[s("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.headerTitle?s("b-nav-text",{staticClass:"text-center text-uppercase",class:{"pl-0":t.paddingLeft}},[t._v("\n            "+t._s(t.headerTitle)+"\n        ")]):t._e(),t._v(" "),t._t("msiteTitle"),t._v(" "),t.signinUp?s("b-nav-item",{attrs:{to:t.userInfo?"/profile":"/login"}},[t.userInfo?s("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}):s("span",{staticClass:"signin-text text-uppercase"},[t._v("SIGNIN/SIGNUP")])]):t._e(),t._v(" "),t._t("edit"),t._v(" "),t._t("changeCity"),t._v(" "),t._t("changeLogin")],2)],2)},r=[],i={render:a,staticRenderFns:r};e.a=i},530:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(89),r=function(t){return t&&t.__esModule?t:{default:t}}(a),i=s(196);e.default={computed:(0,r.default)({},(0,i.mapState)("global/order",["geohash"])),methods:{goToURL:function(t){this.$router.push(t)}}}},534:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(530),r=s.n(a);for(var i in a)"default"!==i&&function(t){s.d(e,t,function(){return a[t]})}(i);var n=s(535),c=s(195),o=c(r.a,n.a,!1,null,null,null);e.default=o.exports},535:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"bv-example-row fixed-bottom footer-menu",attrs:{fluid:""}},[s("b-row",{staticClass:"align-items-center justify-content-around"},[s("b-col",{staticClass:"menu-item d-flex flex-column align-items-center justify-content-center",attrs:{cols:"3"},on:{click:function(e){t.goToURL({path:"/msite",query:{geohash:t.geohash}})}}},[s("i",{staticClass:"fa fa-car",attrs:{"aria-hidden":"true"}}),t._v(" "),s("p",{staticClass:"text-uppercase"},[t._v("DELIVERY")])]),t._v(" "),s("b-col",{staticClass:"menu-item d-flex flex-column align-items-center justify-content-center",attrs:{cols:"3"},on:{click:function(e){t.goToURL({path:"/search/"+t.geohash})}}},[s("i",{staticClass:"fa fa-compass",attrs:{"aria-hidden":"true"}}),t._v(" "),s("p",{staticClass:"text-uppercase"},[t._v("SEARCH")])]),t._v(" "),s("b-col",{staticClass:"menu-item d-flex flex-column align-items-center justify-content-center",attrs:{cols:"3"},on:{click:function(e){t.goToURL("/order")}}},[s("i",{staticClass:"fa fa-list-ul",attrs:{"aria-hidden":"true"}}),t._v(" "),s("p",{staticClass:"text-uppercase"},[t._v("ORDER")])]),t._v(" "),s("b-col",{staticClass:"menu-item d-flex flex-column align-items-center justify-content-center",attrs:{cols:"3"},on:{click:function(e){t.goToURL("/profile")}}},[s("i",{staticClass:"fa fa-user-o",attrs:{"aria-hidden":"true"}}),t._v(" "),s("p",{staticClass:"text-uppercase"},[t._v("ME")])])],1)],1)},r=[],i={render:a,staticRenderFns:r};e.a=i},549:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=s(90),i=a(r),n=s(91),c=a(n),o=s(135),l=a(o),u=s(136),f=s(521),d=a(f),h=s(534),_=a(h),p=s(92),v=a(p);e.default={data:function(){return{geohash:"",searchHistory:[],imgBaseUrl:u.imgBaseUrl,searchValue:"",showHistory:!0,restaurantList:[],isResultEmpty:!1}},components:{headerTop:d.default,footerMenu:_.default},mounted:function(){this.geohash=this.$route.params.geohash,v.default.getStore("searchHistory")&&(this.searchHistory=JSON.parse(v.default.getStore("searchHistory")))},methods:{searchTarget:function(){function t(t){return e.apply(this,arguments)}var e=(0,c.default)(i.default.mark(function t(e){var s,a,r=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}this.searchValue=e,t.next=6;break;case 4:if(this.searchValue){t.next=6;break}return t.abrupt("return");case 6:return this.showHistory=!1,t.next=9,l.default.searchRestaurant(this.geohash,this.searchValue);case 9:this.restaurantList=t.sent,this.isResultEmpty=!this.restaurantList.length,s=v.default.getStore("searchHistory"),s?(a=!1,this.searchHistory=JSON.parse(s),this.searchHistory.forEach(function(t){t===r.searchValue&&(a=!0)}),a||this.searchHistory.push(this.searchValue)):this.searchHistory.push(this.searchValue),v.default.setStore("searchHistory",this.searchHistory);case 14:case"end":return t.stop()}},t,this)}));return t}(),checkInput:function(){""===this.searchValue&&(this.showHistory=!0,this.restaurantList=[],this.isResultEmpty=!1)},clearAllHistory:function(){this.searchHistory=[],v.default.setStore("searchHistory",this.searchHistory)},deleteHistory:function(t){this.searchHistory.splice(t,1),v.default.setStore("searchHistory",this.searchHistory)}}}},594:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"text-light px-0",attrs:{fluid:""}},[s("div",{attrs:{id:"app-container"}},[s("header-top",{attrs:{"header-title":"search",goBack:"true",paddingLeft:"true"}}),t._v(" "),s("b-container",{staticClass:"px-0 main-container",attrs:{fluid:""}},[s("b-card",{staticClass:"city-form-card"},[s("b-form",{on:{sumbit:function(t){t.preventDefault()}}},[s("b-form-group",{staticClass:"search-input"},[s("b-form-input",{staticClass:"form-control",attrs:{type:"search",name:"search",placeholder:"PLEASE TYPE SHOP OR FOOD NAME ...",autofocus:""},on:{input:t.checkInput},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),t._v(" "),s("b-button",{staticClass:"w-100 btn filled-btn",attrs:{name:"submit",value:"SUBMIT"},on:{click:function(e){t.searchTarget("")}}},[t._v("SUBMIT")])],1)],1),t._v(" "),t.restaurantList.length?s("b-card",{staticClass:"shops-card",attrs:{"no-body":""}},[s("b-card-header",[t._v("\n                    SHOP LIST\n                ")]),t._v(" "),s("b-card-body",{staticClass:"p-0"},[s("b-container",{staticClass:"bv-example-row",attrs:{fluid:""}},t._l(t.restaurantList,function(e){return s("b-row",{key:e.id,staticClass:"align-items-start"},[s("b-col",{attrs:{cols:"3"}},[s("img",{staticClass:"shop-img",attrs:{src:t.imgBaseUrl+e.image_path}})]),t._v(" "),s("b-col",{staticClass:"search-result-item",attrs:{cols:"9"}},[s("b-row",{staticClass:"d-flex flex-column justify-content-start align-items-start"},[s("p",[s("span",[t._v(t._s(e.name))]),s("i",{staticClass:"fa fa-cc-visa visa-icon",attrs:{"aria-hidden":"true"}})]),t._v(" "),s("p",[t._v("月售 "+t._s(e.month_sales||e.recent_order_num)+" 单")]),t._v(" "),s("p",[t._v(t._s(e.delivery_fee||e.float_minimum_order_amount)+" 元起送 / 距离"+t._s(e.distance)+"km")])]),t._v(" "),s("b-row",t._l(e.restaurant_activity,function(e){return s("b-row",{key:e.id,staticClass:"d-flex flex-column justify-content-start align-items-start p-0 border-0"},[s("b-col",{staticClass:"d-flex flex-row align-items-center activity-item",attrs:{cols:"12"}},[s("span",{staticClass:"activity-icon",style:{backgroundColor:"#"+e.icon_color}},[t._v(t._s(e.icon_name))]),t._v(" "),s("span",[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"only-phone"},[t._v("(手机客户端专享)")])])],1)}))],1)],1)}))],1)],1):t._e(),t._v(" "),t.searchHistory.length&&t.showHistory?s("b-card",{staticClass:"search-history-card",attrs:{"no-body":""}},[s("b-card-header",[t._v("\n                    SEARCH HISTORY\n                ")]),t._v(" "),s("b-card-body",{staticClass:"p-0"},[s("b-container",{staticClass:"bv-example-row",attrs:{fluid:""}},t._l(t.searchHistory,function(e,a){return s("b-row",{key:a,staticClass:"food-search-history-row"},[s("b-col",{staticClass:"d-flex flex-row justify-content-between align-items-center",attrs:{cols:"12"}},[s("span",{on:{click:function(s){t.searchTarget(e)}}},[t._v(t._s(e))]),t._v(" "),s("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"},on:{click:function(e){t.deleteHistory(a)}}})])],1)}))],1),t._v(" "),s("b-card-footer",{on:{click:t.clearAllHistory}},[t._v("\n                    CLAER ALL\n                ")])],1):t._e(),t._v(" "),t.isResultEmpty?s("b-card",{staticClass:"search-history-card",attrs:{"no-body":""}},[s("b-card-body",{staticClass:"p-0"},[s("div",{staticClass:"notice-msg"},[t._v("NO SEARCHING RESULTS ...")])])],1):t._e()],1),t._v(" "),s("footer-menu")],1)])},r=[],i={render:a,staticRenderFns:r};e.a=i}});