webpackJsonp([5],{477:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(548),i=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,function(){return a[t]})}(r);var n=s(593),o=s(195),l=o(i.a,n.a,!1,null,null,null);e.default=l.exports},520:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(89),i=function(t){return t&&t.__esModule?t:{default:t}}(a),r=s(196);e.default={props:["signinUp","headerTitle","goBack","hasLogo","paddingLeft"],methods:(0,i.default)({},(0,r.mapActions)("global/user",["getUserInfo"])),computed:(0,i.default)({},(0,r.mapState)("global/user",["userInfo"])),mounted:function(){this.getUserInfo()}}},521:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(520),i=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,function(){return a[t]})}(r);var n=s(522),o=s(195),l=o(i.a,n.a,!1,null,null,null);e.default=l.exports},522:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-navbar",{staticClass:"fixed-top"},[t._t("logo"),t._v(" "),s("b-navbar-nav",{staticClass:"flex-row align-items-center flex-nowrap",class:t.hasLogo?"":"w-100"},[t._t("search"),t._v(" "),t.goBack?s("b-nav-item",{on:{click:function(e){t.$router.go(-1)}}},[s("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.headerTitle?s("b-nav-text",{staticClass:"text-center text-uppercase",class:{"pl-0":t.paddingLeft}},[t._v("\n            "+t._s(t.headerTitle)+"\n        ")]):t._e(),t._v(" "),t._t("msiteTitle"),t._v(" "),t.signinUp?s("b-nav-item",{attrs:{to:t.userInfo?"/profile":"/login"}},[t.userInfo?s("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}):s("span",{staticClass:"signin-text text-uppercase"},[t._v("SIGNIN/SIGNUP")])]):t._e(),t._v(" "),t._t("edit"),t._v(" "),t._t("changeCity"),t._v(" "),t._t("changeLogin")],2)],2)},i=[],r={render:a,staticRenderFns:i};e.a=r},529:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["rating"]}},531:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={methods:{getImgPath:function(t){var e=void 0;return t?(e=-1!==t.indexOf("jpeg")?".jpeg":".png","https://fuss10.elemecdn.com/"+t.substr(0,1)+"/"+t.substr(1,2)+"/"+t.substr(3)+e):"http://test.fe.ptdev.cn/elm/elmlogo.jpeg"}}};e.default={getImgPath:a}},532:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(529),i=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,function(){return a[t]})}(r);var n=s(533),o=s(195),l=o(i.a,n.a,!1,null,null,null);e.default=l.exports},533:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rating-container"},[s("div",{staticClass:"star-container"},t._l(5,function(t){return s("svg",{key:t,staticClass:"grey-fill"},[s("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#star"}})])})),t._v(" "),s("div",{staticClass:"star-overflow",style:"width:"+2.75*t.rating/5+"rem"},[s("div",{staticClass:"star-container"},t._l(5,function(t){return s("svg",{key:t,staticClass:"highlight-fill"},[s("use",{attrs:{"xmlns:xlink":"http://www.w3.org/1999/xlink","xlink:href":"#star"}})])}))]),t._v(" "),s("svg",{staticStyle:{position:"absolute",width:"0",height:"0",visibility:"hidden"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[s("defs",[s("symbol",{attrs:{id:"star",viewBox:"0 0 32 32"}},[s("path",{staticClass:"path1",attrs:{d:"M16 26.382l-8.16 4.992c-1.5 0.918-2.382 0.264-1.975-1.435l2.226-9.303-7.269-6.218c-1.337-1.143-0.987-2.184 0.755-2.322l9.536-0.758 3.667-8.835c0.674-1.624 1.772-1.613 2.442 0l3.667 8.835 9.536 0.758c1.753 0.139 2.082 1.187 0.755 2.322l-7.269 6.218 2.226 9.303c0.409 1.71-0.485 2.347-1.975 1.435l-8.16-4.992z"}})])])])])},i=[],r={render:a,staticRenderFns:i};e.a=r},536:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(90),r=a(i),n=s(197),o=a(n),l=s(91),c=a(l),u=s(89),d=a(u),f=s(196),h=s(136),p=s(135),v=a(p),_=s(532),m=a(_);e.default={data:function(){return{offset:0,shopListArr:[],imgBaseUrl:h.imgBaseUrl,touchend:!1}},mounted:function(){this.initData()},props:["restaurantCategoryId","restaurantCategoryIds","sortByType","deliveryMode","supportIds","confirmSelect","geohash"],computed:(0,d.default)({},(0,f.mapState)("global/address",["latitude","longitude"])),components:{ratingStar:m.default},methods:{initData:function(){function t(){return e.apply(this,arguments)}var e=(0,c.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.default.shopList(this.latitude,this.longitude,this.offset,this.restaurantCategoryId);case 2:if(e=t.sent,this.shopListArr=[].concat((0,o.default)(e)),!(e.length<20)){t.next=7;break}return this.touchend=!0,t.abrupt("return");case 7:case"end":return t.stop()}},t,this)}));return t}(),nextShopPage:function(t,e){this.$router.push({path:"/shop",query:{geohash:t,id:e}})},listenPropChange:function(){function t(){return e.apply(this,arguments)}var e=(0,c.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.offset=0,t.next=3,v.default.shopList(this.latitude,this.longitude,this.offset,"",this.restaurantCategoryIds,this.sortByType,this.deliveryMode,this.supportIds);case 3:e=t.sent,this.shopListArr=[].concat((0,o.default)(e));case 5:case"end":return t.stop()}},t,this)}));return t}()},watch:{sortByType:function(t){this.listenPropChange()},confirmSelect:function(t){this.listenPropChange()},restaurantCategoryIds:function(t){this.listenPropChange()}}}},538:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(536),i=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,function(){return a[t]})}(r);var n=s(539),o=s(195),l=o(i.a,n.a,!1,null,null,null);e.default=l.exports},539:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.shopListArr.length?s("b-container",{staticClass:"bv-example-row",attrs:{fluid:""}},t._l(t.shopListArr,function(e){return s("b-row",{key:e.id,on:{click:function(s){t.nextShopPage(t.geohash,e.id)}}},[s("b-col",{attrs:{cols:"3"}},[s("img",{staticClass:"shop-img",attrs:{src:t.imgBaseUrl+e.image_path}})]),t._v(" "),s("b-col",{attrs:{cols:"9"}},[s("b-row",[s("h4",{staticClass:"shop-title col-8 px-0",class:e.is_premium?"premium":""},[t._v(t._s(e.name))]),t._v(" "),s("b-button-group",{staticClass:"px-0 col-4 justify-content-end"},t._l(e.supports,function(e){return s("b-button",{key:e.id,staticClass:"support-icon",attrs:{disabled:""}},[t._v(t._s(e.icon_name))])}))],1),t._v(" "),s("b-row",{staticClass:"py-1 align-items-center"},[s("div",{staticClass:"rating d-flex flex-row align-items-center"},[s("rating-star",{attrs:{rating:e.rating}}),t._v(" "),s("p",{staticClass:"rating-text"},[s("span",{staticClass:"rating-num"},[t._v(t._s(e.rating)+" ")]),t._v("月售"+t._s(e.recent_order_num)+"单")])],1),t._v(" "),s("div",{staticClass:"delivery-mode"},[e.delivery_mode?s("b-button",{attrs:{disabled:"",variant:"success"}},[t._v(t._s(e.delivery_mode.text))]):t._e(),t._v(" "),s("b-button",{attrs:{disabled:"",variant:"outline-success"}},[t._v("准时达")])],1)]),t._v(" "),s("b-row",[s("p",{staticClass:"delivery-info"},[t._v("¥"+t._s(e.float_minimum_order_amount)+"起送 "),s("span",{staticClass:"segmentation"},[t._v(" / ")]),t._v(" "+t._s(e.piecewise_agent_fee.tips))]),t._v(" "),s("p",{staticClass:"delivery-time"},[Number(e.distance)?s("span",[t._v(t._s(e.distance>1e3?(e.distance/1e3).toFixed(2)+"km":e.distance+"m")+" /")]):s("span",[t._v(t._s(e.distance)+" /")]),t._v(" "),s("span",{staticClass:"time-text"},[t._v(t._s(e.order_lead_time))])])])],1)],1)})):t._e()},i=[],r={render:a,staticRenderFns:i};e.a=r},548:function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=s(90),r=a(i),n=s(91),o=a(n),l=s(89),c=a(l),u=s(196),d=s(135),f=a(d),h=s(521),p=a(h),v=s(538),_=a(v),m=s(531),y=a(m);e.default={data:function(){return{geohash:"",headerTitle:"",sortTitle:"",restaurant_category_id:"",restaurant_category_ids:"",sortBy:"",cateList:null,cateDetail:null,sortByType:null,deliveryModeList:null,promotionList:null,deliveryMode:null,promotion_ids:[],filterNum:0,confirmStatus:!1}},created:function(){this.initData()},computed:(0,c.default)({},(0,u.mapState)("global/address",["latitude","longitude"])),components:{headerTop:p.default,shopList:_.default},mixins:[y.default.getImgPath],methods:(0,c.default)({},(0,u.mapMutations)({recordAddress:"global/address/recordAddress"}),{initData:function(){function t(){return e.apply(this,arguments)}var e=(0,o.default)(r.default.mark(function t(){var e,s=this;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.geohash=this.$route.query.geohash,this.headerTitle=this.$route.query.title,this.sortTitle=this.headerTitle,this.restaurant_category_id=this.$route.query.restaurant_category_id,this.latitude){t.next=9;break}return t.next=7,f.default.msiteAddress(this.geohash);case 7:e=t.sent,this.recordAddress(e);case 9:return t.next=11,f.default.foodCateList(this.latitude,this.longitude);case 11:return this.cateList=t.sent,this.cateList.forEach(function(t){parseInt(s.restaurant_category_id)===parseInt(t.id)&&(s.cateDetail=t.sub_categories)}),t.next=15,f.default.foodDelivery(this.latitude,this.longitude);case 15:return this.deliveryModeList=t.sent,t.next=18,f.default.foodPromotion(this.latitude,this.longitude);case 18:this.promotionList=t.sent,this.promotionList.forEach(function(t,e){s.promotion_ids[e]={status:!1,id:t.id}});case 20:case"end":return t.stop()}},t,this)}));return t}(),chooseCateType:function(){function t(t){return e.apply(this,arguments)}var e=(0,o.default)(r.default.mark(function t(e){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.sortBy!==e?(this.sortBy=e,this.sortTitle="food"===e?"categories":this.headerTitle):(this.sortBy=null,"food"===e&&(this.sortTitle=this.headerTitle));case 1:case"end":return t.stop()}},t,this)}));return t}(),selectCateName:function(t,e){this.restaurant_category_ids=t,this.sortBy=null,this.sortTitle=this.headerTitle=e},selectCateList:function(t,e){0===e?(this.restaurant_category_ids=null,this.sortBy=""):(this.restaurant_category_id=t,this.cateDetail=this.cateList[e].sub_categories)},selectDeliveryMode:function(t){null===this.deliveryMode?(this.filterNum++,this.deliveryMode=t):this.deliveryMode===t?(this.filterNum--,this.deliveryMode=null):this.deliveryMode=t},selectPromotions:function(t,e){var s=this;this.promotion_ids.splice(t,1,{status:!this.promotion_ids[t].status,id:e}),this.filterNum=null===this.deliveryMode?0:1,this.promotion_ids.forEach(function(t){t.status&&s.filterNum++})},clearPromotions:function(){this.promotion_ids.map(function(t){return t.status=!1}),this.filterNum=0,this.deliveryMode=null},confirmPromotions:function(){this.confirmStatus=!this.confirmStatus,this.sortBy=""}})}},593:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{staticClass:"text-light px-0",attrs:{fluid:""}},[s("div",{staticClass:"cate-food-container",attrs:{id:"app-container"}},[s("header-top",{attrs:{"header-title":t.headerTitle,goBack:"true",paddingLeft:"true"}}),t._v(" "),s("b-container",{staticClass:"position-relative px-0 main-container d-flex flex-column",attrs:{fluid:""}},[s("b-card",{staticClass:"cate-sortable-card",attrs:{"body-class":"p-0"}},[s("div",{staticClass:"d-flex flex-row align-items-center sortable-title"},[s("p",{class:{active:"food"==t.sortBy},on:{click:function(e){t.chooseCateType("food")}}},[s("span",[t._v(t._s(t.sortTitle))]),t._v(" "),s("i",{staticClass:"fa ml-3",class:["food"==t.sortBy?"fa-caret-up":"fa-caret-down"],attrs:{"aria-hidden":"true"}})]),t._v(" "),s("p",{class:{active:"sort"==t.sortBy},on:{click:function(e){t.chooseCateType("sort")}}},[s("span",[t._v("sort")]),t._v(" "),s("i",{staticClass:"fa ml-3",class:["sort"==t.sortBy?"fa-caret-up":"fa-caret-down"],attrs:{"aria-hidden":"true"}})]),t._v(" "),s("p",{class:{active:"activity"==t.sortBy},on:{click:function(e){t.chooseCateType("activity")}}},[s("span",[t._v("filter")]),t._v(" "),s("i",{staticClass:"fa ml-3",class:["activity"==t.sortBy?"fa-caret-up":"fa-caret-down"],attrs:{"aria-hidden":"true"}})])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"food"==t.sortBy,expression:"sortBy == 'food'"}],staticClass:"sortable-panel cate-sort"},[s("transition",{attrs:{name:"fade-choose"}},[s("b-container",{directives:[{name:"show",rawName:"v-show",value:t.cateList,expression:"cateList"}],staticClass:"cate-container p-0 bv-example-row h-100",attrs:{fluid:""}},[s("b-row",{staticClass:"m-0 h-100"},[s("b-col",{staticClass:"p-0 d-flex flex-column cate-list-container",attrs:{cols:"6"}},t._l(t.cateList,function(e,a){return s("b-row",{key:a,staticClass:"cate-list-item flex-row align-items-center",class:{"active-cate":t.restaurant_category_id==e.id},on:{click:function(s){t.selectCateList(e.id,a)}}},[a?s("img",{attrs:{src:t.getImgPath(e.image_url)}}):t._e(),t._v(" "),s("span",[t._v(t._s(e.name))]),t._v(" "),s("p",[s("span",{staticClass:"cate-num"},[t._v(t._s(e.count))]),a?s("i",{staticClass:"fa fa-angle-right ml-2",attrs:{"aria-hidden":"true"}}):t._e()])])})),t._v(" "),s("b-col",{staticClass:"cate-detail-container p-0",attrs:{cols:"6"}},t._l(t.cateDetail,function(e,a){return a?s("b-row",{key:e.id,staticClass:"cate-detail-item flex-row align-items-center justify-content-between",class:{chosed:t.restaurant_category_ids==e.id||!t.restaurant_category_ids&&0==a},on:{click:function(s){t.selectCateName(e.id,e.name)}}},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("span",[t._v(t._s(e.count))])]):t._e()}))],1)],1)],1)],1)]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"sort"==t.sortBy,expression:"sortBy == 'sort'"}],staticClass:"sortable-panel auto-sort"},[s("b-list-group",[s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center justify-content-between",class:{chosed:0==t.sortByType},on:{click:function(e){t.sortByType=0,t.sortBy=null}}},[s("p",[s("i",{staticClass:"fa fa-sort mr-3",attrs:{"aria-hidden":"true"}}),s("span",[t._v("Smart Sort")])]),t._v(" "),0==t.sortByType?s("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}):t._e()]),t._v(" "),s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center justify-content-between",class:{chosed:5==t.sortByType},on:{click:function(e){t.sortByType=5,t.sortBy=null}}},[s("p",[s("i",{staticClass:"fa fa-map-marker mr-3",attrs:{"aria-hidden":"true"}}),s("span",[t._v("Nearest")])]),t._v(" "),5==t.sortByType?s("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}):t._e()]),t._v(" "),s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center justify-content-between",class:{chosed:6==t.sortByType},on:{click:function(e){t.sortByType=6,t.sortBy=null}}},[s("p",[s("i",{staticClass:"fa fa-fire mr-3",attrs:{"aria-hidden":"true"}}),s("span",[t._v("Best Sell")])]),t._v(" "),6==t.sortByType?s("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}):t._e()]),t._v(" "),s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center justify-content-between",class:{chosed:1==t.sortByType},on:{click:function(e){t.sortByType=1,t.sortBy=null}}},[s("p",[s("i",{staticClass:"fa fa-usd mr-3",attrs:{"aria-hidden":"true"}}),s("span",[t._v("Lowest Delivery Fee")])]),t._v(" "),1==t.sortByType?s("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}):t._e()]),t._v(" "),s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center justify-content-between",class:{chosed:2==t.sortByType},on:{click:function(e){t.sortByType=2,t.sortBy=null}}},[s("p",[s("i",{staticClass:"fa fa-clock-o mr-3",attrs:{"aria-hidden":"true"}}),s("span",[t._v("Fastest Delivery")])]),t._v(" "),2==t.sortByType?s("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}):t._e()]),t._v(" "),s("b-list-group-item",{staticClass:"d-flex flex-row align-items-center justify-content-between",class:{chosed:3==t.sortByType},on:{click:function(e){t.sortByType=3,t.sortBy=null}}},[s("p",[s("i",{staticClass:"fa fa-star mr-3",attrs:{"aria-hidden":"true"}}),s("span",[t._v("Best Review")])]),t._v(" "),3==t.sortByType?s("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}):t._e()])],1)],1)]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"activity"==t.sortBy,expression:"sortBy == 'activity'"}],staticClass:"sortable-panel activity-sort"},[s("h4",[t._v("Delivery Methods")]),t._v(" "),s("b-row",{staticClass:"m-0 pt-2"},t._l(t.deliveryModeList,function(e){return s("p",{key:e.id,staticClass:"d-flex flex-row align-items-center",on:{click:function(s){t.selectDeliveryMode(e.id)}}},[s("i",{staticClass:"fa",class:[t.deliveryMode==e.id?"fa-check":"fa-plane"],attrs:{"aria-hidden":"true"}}),t._v(" "),s("span",{class:{chosed:t.deliveryMode==e.id}},[t._v(t._s(e.text))])])})),t._v(" "),s("h4",[t._v("Shop Features(multichoice)")]),t._v(" "),s("b-row",{staticClass:"m-0 py-2"},t._l(t.promotionList,function(e,a){return s("p",{key:e.id,staticClass:"d-flex flex-row align-items-center",on:{click:function(s){t.selectPromotions(a,e.id)}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:t.promotion_ids[a].status,expression:"promotion_ids[index].status"}],staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.promotion_ids[a].status,expression:"!promotion_ids[index].status"}],staticClass:"name-icon",style:{color:"#"+e.icon_color,borderColor:"#"+e.icon_color}},[t._v(t._s(e.icon_name))]),t._v(" "),s("span",{class:{chosed:t.promotion_ids[a].status}},[t._v(t._s(e.name))])])})),t._v(" "),s("div",{staticClass:"w-100 d-flex flex-row flex-nowrap align-items-center justify-content-between"},[s("b-button",{staticClass:"w-100 btn filled-btn info-btn cancel-btn",attrs:{name:"clear",value:"CLEAR"},on:{click:t.clearPromotions}},[t._v("CLEAR")]),t._v(" "),s("b-button",{staticClass:"w-100 btn filled-btn info-btn",attrs:{name:"confirm",value:"CONFIRM"},on:{click:t.confirmPromotions}},[t._v("CONFIRM "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.filterNum,expression:"filterNum"}]},[t._v("("+t._s(t.filterNum)+")")])])],1)],1)])],1),t._v(" "),s("b-card",{staticClass:"shops-card",attrs:{"body-class":"p-0 position-relative"}},[t.latitude?s("shop-list",{attrs:{geohash:t.geohash,restaurantCategoryId:t.restaurant_category_id,restaurantCategoryIds:t.restaurant_category_ids,sortByType:t.sortByType,deliveryMode:t.deliveryMode,supportIds:t.promotion_ids,confirmSelect:t.confirmStatus}}):t._e(),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.sortBy,expression:"sortBy"}],staticClass:"overlay"})])],1)],1)],1)])},i=[],r={render:a,staticRenderFns:i};e.a=r}});